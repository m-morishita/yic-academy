# AI統合探索ボット設計書

## 概要
山口県の困りごと発見ワークショップをAIファーストで支援する統合型ボット。参加者の気づきから、データ分析、ペルソナ特定、困りごと発見、優先順位付けまでを一貫してリアルタイムで実行する。

## 設計理念

### 完全統合型アプローチ
- 問題発見→分析→具体化を同時並行処理
- 人間の入力に対して多層的な分析を即座に実行
- リアルタイムで可視化し、探索を促進

### 人間中心のAI活用
- AIは強力な分析エンジン、人間は意思決定者
- 直感的な対話で専門知識不要
- データの透明性を保ちつつ、わかりやすく提示

## コア機能

### 1. マルチレイヤー分析エンジン
```
入力層：参加者の気づき・疑問
  ↓
分析層1：問題領域の特定とデータ収集
  ↓
分析層2：影響を受ける層の定量的特定
  ↓
分析層3：具体的困りごとの抽出
  ↓
出力層：構造化された分析結果
```

### 2. リアルタイム可視化
- 入力と同時にMiroボードに反映
- 問題領域・影響層・困りごとの3軸マトリクス
- 他参加者の探索結果も統合表示

### 3. 対話的深掘り機能
- 文脈を理解した追加質問
- 関連データの自動提示
- 具体例の引き出し

## 動作フロー

### Phase 1: 初期探索（0-15分）

**開始方法：**
オープニングのクイックスタート（「山口県について気になることを何でもAIに話してみてください」）からシームレスに移行。最初の入力を起点として、15分間の探索を展開。

#### 入力パターンと応答例

**パターン1：漠然とした気づき**
```
参加者：「なんか最近、町が静かになった気がする」

AI：「町の変化について分析しました：

📊 人口動態の変化
- 過去5年で人口が8.3%減少（特に20-30代）
- 商店数が32%減少
- 空き家率が15.2%に上昇

👥 特に影響を受けている方々：
1. 地元商店主（平均年齢68歳、後継者不在率73%）
2. 車を持たない高齢者（約1.8万人、買い物困難）
3. 子育て世代（遊び場や交流の場が減少）

💭 具体的にどんな場面で「静か」を感じましたか？」
```

**パターン2：具体的な問題意識**
```
参加者：「高校生の息子が『地元に残りたいけど大学がない』と」

AI：「教育機会と若者の進路について詳しく見てみましょう：

📚 教育環境の現状
- 県内大学の学部：工学、経済、教育、医学のみ
- 県外進学率：78%（全国平均54%）
- 希望が多いが県内にない分野：
  - IT・データサイエンス（希望者の23%）
  - 国際関係・外国語（18%）
  - デザイン・クリエイティブ（15%）

💰 県外進学の負担
- 追加費用：平均156万円/年
- 県内就職率：卒業後12%（10年前は31%）

🤔 息子さんは具体的にどんな分野に興味がありますか？」
```

### Phase 2: 統合分析（15-35分）

#### 自動クラスタリングと関連付け

全参加者の入力を基に、AIがリアルタイムで以下を実行：

1. **問題領域の自動生成**
   ```
   クラスタ分析結果：
   ├─ 若者流出（関連入力：12件）
   │  ├─ 教育機会不足
   │  ├─ 就職先限定
   │  └─ 都市的魅力不足
   ├─ 地域経済衰退（関連入力：8件）
   │  ├─ 商店街空洞化
   │  ├─ 事業承継問題
   │  └─ 新産業不在
   └─ 生活インフラ（関連入力：6件）
      ├─ 買い物困難
      ├─ 医療アクセス
      └─ 公共交通
   ```

2. **影響マトリクスの生成**
   ```
   ┌─────────────┬──────────────┬─────────────┬──────────┐
   │問題領域      │直接影響者    │間接影響者   │深刻度    │
   ├─────────────┼──────────────┼─────────────┼──────────┤
   │教育機会不足  │高校生800名/年│親1600名     │★★★★★    │
   │商店街空洞化  │商店主1200名  │住民2.3万名  │★★★★☆    │
   │買い物困難    │高齢者1.8万名 │家族3万名    │★★★★★    │
   └─────────────┴──────────────┴─────────────┴──────────┘
   ```

3. **困りごとの具体化**
   各問題領域×影響層の組み合わせで、具体的な困りごとを自動生成

### Phase 3: 優先順位付け（35-45分）

#### インテリジェントスコアリング

**多角的評価の自動実行**
```python
スコアリングロジック：
- 影響度 = 直接影響者数 × 深刻度係数
- 緊急度 = 問題の進行速度 × 不可逆性
- 解決可能性 = 類似成功事例 × リソース適合度
- 波及効果 = 解決時の他問題への影響度

総合スコア = Σ(各指標 × 重み係数)
```

**優先順位の提示**
```
🎯 推奨優先順位（AIスコアリング結果）

1位：買い物困難問題（スコア：92/100）
  理由：生活必需に直結、解決モデル存在、波及効果大
  
2位：若者の学習機会不足（スコア：87/100）
  理由：長期的影響大、イノベーション可能、関心高
  
3位：事業承継問題（スコア：73/100）
  理由：緊急度高、但し解決難度も高

💡 グループの強みを考慮した場合の推奨：
「ITに強いメンバーが多い → 2位を1位に」
```

## 技術アーキテクチャ

### システム構成
```
┌─────────────────────────────────────────────┐
│          フロントエンド層                   │
│  ┌──────────┐  ┌────────────┐  ┌────────┐│
│  │Chatbot UI│  │Miro Plugin │  │Voice   ││
│  │          │  │            │  │Input   ││
│  └──────────┘  └────────────┘  └────────┘│
├─────────────────────────────────────────────┤
│           統合分析エンジン                  │
│  ┌──────────────────────────────────────┐  │
│  │  自然言語理解 → 多層分析 → 可視化    │  │
│  │  ┌────────┐ ┌────────┐ ┌──────────┐│  │
│  │  │NLU     │→│Analytics│→│Visualize ││  │
│  │  └────────┘ └────────┘ └──────────┘│  │
│  └──────────────────────────────────────┘  │
├─────────────────────────────────────────────┤
│            データ層                         │
│  ┌───────────┐ ┌──────────┐ ┌──────────┐│
│  │山口県DB   │ │全国統計  │ │事例DB    ││
│  │           │ │          │ │          ││
│  └───────────┘ └──────────┘ └──────────┘│
└─────────────────────────────────────────────┘
```

### データソース連携

1. **山口県特化データ**
   - 県統計年鑑
   - 市町村別詳細データ
   - 地域独自調査結果

2. **比較分析用データ**
   - 全国統計（e-Stat）
   - 類似地域データ
   - RESAS（地域経済分析システム）

3. **事例・知見データベース**
   - 他地域の成功/失敗事例
   - 学術研究結果
   - 政策効果データ

## プロンプトエンジニアリング

### マスタープロンプト
```
あなたは山口県の地域課題発見を支援するAI統合探索アシスタントです。

# 基本姿勢
- 参加者の気づきを起点に、データドリブンな分析を提供
- 常に「誰が」「どのように」困っているかを具体化
- 押し付けではなく、選択肢と判断材料を提供

# 分析の流れ
1. 入力を受けたら、関連する問題領域を特定
2. 定量データを即座に検索・提示
3. 影響を受ける具体的な人々を特定
4. 困りごとを多角的に抽出
5. 探索を深める質問を投げかける

# 重要な制約
- 山口県のデータを優先使用
- 推測ではなくデータに基づく
- 地域への敬意を持った表現
- 専門用語を避け、平易な言葉で

# 出力形式
- 絵文字を使った見やすい構造
- 数値は具体的に（％、人数）
- 次のアクションを促す質問で締める
```

### 動的プロンプト生成

参加者の特性や進行状況に応じて、プロンプトを動的に調整：

```python
def generate_context_prompt(user_profile, phase, previous_interactions):
    base_prompt = load_master_prompt()
    
    # ユーザー特性の反映
    if user_profile.is_data_oriented:
        base_prompt += "\n詳細なデータ分析を重視"
    elif user_profile.is_story_oriented:
        base_prompt += "\n具体的なエピソードを重視"
    
    # フェーズ別の調整
    if phase == "exploration":
        base_prompt += "\n幅広い可能性を提示"
    elif phase == "convergence":
        base_prompt += "\n絞り込みと具体化を支援"
    
    return base_prompt
```

## パフォーマンス指標

### 定量的KPI
1. **探索効率**
   - 平均探索時間：15分以内
   - カバー領域数：参加者あたり3領域以上
   - データ提示数：対話あたり5-10件

2. **分析品質**
   - データ裏付け率：100%
   - 困りごと具体化率：90%以上
   - 優先順位の納得度：4.5/5以上

3. **システム性能**
   - 応答時間：2秒以内
   - 同時接続数：50名以上
   - 可用性：99.9%

### 定性的評価
- 参加者の気づきの深さ
- 議論の活性化度
- 意外な発見の有無

## セキュリティとプライバシー

### データ保護
- 個人情報は収集しない
- 対話ログは匿名化して保存
- 統計データのみを使用

### アクセス制御
- ワークショップ単位でのアクセストークン
- 時限的なデータアクセス
- 監査ログの完備

## 将来の拡張性

### 機能拡張ロードマップ

1. **第2フェーズ（3ヶ月後）**
   - 解決策の自動提案機能
   - 他地域との比較分析
   - 予測シミュレーション

2. **第3フェーズ（6ヶ月後）**
   - マルチモーダル入力（画像、地図）
   - リアルタイム多言語対応
   - AR/VRでの没入型探索

3. **第4フェーズ（1年後）**
   - 継続的モニタリング機能
   - 政策効果の測定
   - 市民参加型プラットフォーム化

### 技術的拡張性
- マイクロサービス化による柔軟な機能追加
- API公開による外部連携
- 機械学習による精度向上